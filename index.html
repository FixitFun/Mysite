<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>FixitFun</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/PointerLockControls.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <audio id="click-sound" src="/sound/negromkiy-korotkiy-klik.mp3" preload="auto"></audio>
    <audio id="poweroff-sound" src="/sound/Звук выключения экрана.mp3" preload="auto"></audio>
    <audio id="bios-sound" src="/sound/Включение ноутбука шум вентиляторов выключение.mp3" preload="auto"></audio>
    <audio id="boot-sound" src="/sound/15949.mp3" preload="auto"></audio>
    <script src="https://cdn.jsdelivr.net/npm/js-dos@6.22.6/dist/js-dos.js"></script>
    <link rel="shortcut icon" href="/icon/бум.png" type="image/png">
</head>
<body>

  
<!-- Кнопка запуска -->
<div id="start-screen" style="
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
">
    <button id="start-btn" style="
        padding: 15px 30px;
        background: #001100;
        border: 2px solid #00ff66;
        color: #00ff66;
        font-family: 'Courier New', monospace;
        cursor: pointer;
        font-size: 1.2rem;
    ">
        ▶ START SYSTEM
    </button>
</div>
  
 <!-- BIOS ЭКРАН -->
  <div id="bios-screen" style="display: none;">
    <pre id="bios-text"></pre>
  </div>

  <!-- ЗАГРУЗКА ОС -->
 <div id="os-boot-screen" style="display: none;">
  <!-- Добавляем контейнер для ЭЛТ-эффектов -->
  <div class="crt-overlay">
    <div class="crt-screen">
      <div class="os-logo">
        <img src="https://media.tenor.com/LNnibTM5YEMAAAAj/scp.gif" alt="SCP Logo">
      </div>
      <div class="fnaf-loader-container">
        <div class="fnaf-loader"></div>
      </div>
    </div>
  </div>
</div>




  <script>

    // Инициализация элементов
const startScreen = document.getElementById('start-screen');
const startBtn = document.getElementById('start-btn');

// Показываем только кнопку при загрузке
window.addEventListener('DOMContentLoaded', () => {
    startScreen.style.display = 'flex'; // Принудительно показываем
    document.querySelector('.container').style.display = 'none';
});

// Обработчик кнопки
startBtn.addEventListener('click', async () => {
    startScreen.style.display = 'none';
    
    try {
        await biosSound.play();
        startBiosSequence();
    } catch(e) {
        console.error('Audio error:', e);
        startBiosSequence();
    }
});

    let userInteracted = false;

    document.body.addEventListener('click', async () => {
    if (!userInteracted) {
        userInteracted = true;
        try {
            await biosSound.play();
        } catch(e) {
            console.error('Audio playback error:', e);
        }
        startBiosSequence();
    }
});

const startBiosSequence = () => {
    biosScreen.style.display = "block";
    showNextLine();
} 
  const biosLines = [
    "FIXITFUN BIOS v0.8.7 (c) 1998-2025 Foundation Systems",
    "Initializing system hardware...",
    "Memory Test: 262144K OK",
    "Detecting IDE Drives...",
    "Primary Master: SCP-8000.CONTAINED",
    "Primary Slave : NONE",
    "Secondary Master: USER_PROFILE.DAT",
    "Secondary Slave: NONE",
    "",
    "Loading RETRO-UX Interface...",
    "Loading CRYPTO LAYER ██████████ 100%",
    "Decryption Key Accepted...",
    "System Status: STABLE",
    "Boot Sequence Complete. Launching...",
    "",
    "RETRO-OS v3.14.15",
    "Mounting filesystems...",
    "Loading kernel modules...",
    "Initializing GUI subsystem...",
    "Starting background services...",
    "Loading desktop environment...",
    "Welcome to SCP-OS"
  ];

  const biosScreen = document.getElementById("bios-screen");
  const osBootScreen = document.getElementById("os-boot-screen");
  const mainUI = document.getElementById("main-ui");
  const biosText = document.getElementById("bios-text");

  const biosSound = document.getElementById("bios-sound");
  const bootSound = document.getElementById("boot-sound");

  let i = 0;

  function showNextLine() {
    if (i < biosLines.length) {
      biosText.textContent += biosLines[i] + "\n";
      i++;
      setTimeout(showNextLine, 300);
    } else {
      // BIOS завершён → OS Boot
      setTimeout(() => {
        biosScreen.style.display = "none";
        showOSBoot();
      }, 1500);
    }
  }

  

  function showOSBoot() {
    osBootScreen.style.display = "flex";
    if (userInteracted) {
        bootSound.play().catch(e => console.error('Boot sound error:', e));
    }
    
    setTimeout(() => {
        osBootScreen.style.display = "none";
        document.querySelector('.container').style.display = 'block'; // Показываем основной контент
    }, 5000);
}
</script>     

   <div class="crt-effect"></div>
    
    <div class="container" style="display: none;">
        <div class="terminal-header">
            <img src="https://media.tenor.com/LNnibTM5YEMAAAAj/scp.gif" 
                 class="scp-logo" 
                 alt="SCP Foundation">
            <div>
                <h2>SECURE. CONTAIN. PROTECT.</h2>
                <p>v3.1.4 | STATUS: <span class="status-text">OPERATIONAL</span></p>
            </div>
        </div>

 <script>
        // Динамическое обновление статуса
        const statusText = document.querySelector('.status-text');
        const statusMessages = [
            'GOOD'
        ];

        setInterval(() => {
            const randomStatus = statusMessages[Math.floor(Math.random() * statusMessages.length)];
            statusText.textContent = randomStatus;
            statusText.style.color = Math.random() > 0.5 ? '#0f0' : '#f00';
        }, 5000);


        // Случайные помехи
        setInterval(() => {
            if(Math.random() < 0.2) {
                document.body.style.filter = `hue-rotate(${Math.random() * 30}deg)`;
                setTimeout(() => document.body.style.filter = '', 100);
            }
        }, 3000);
    </script>


<div class="main-layout">
<aside class="sidebar">
  <div class="profile-section">
  <h3>Оператор</h3>
  <p>Имя: FixitFun</p>
  <p>Роль: Инди-разработчик</p>
  <p>Статус:  АКТИВЕН  <span class="status-dot"></span></p>

  <p>Объектов в разработке: 1</p>
</div>

<div class="skills-section">
  <h3>Навыки</h3>
  <ul>
    <li>C# / Unity</li>
    <li>Lua / GMod</li>
    <li>Blender</li>
    <li>FL Studio</li>
    <li>DaVinci Resolve</li>
  </ul>
</div>

<div class="contact-section">
  <h3>Связь</h3>
  <p>GitHub: <a href="https://github.com/FixitFun" target="_blank">FixitFun</a></p>
  <p>Telegram: <a href="https://t.me/Silampix" target="_blank">SILAMPIX</a></p>
  <p>Email: <span>telexiaomine@gmail.com</span></p>
  <p>Youtube: <a href="https://www.youtube.com/@SILAMPIX" target="_blank">SILAMPIX</a></p>
   <div class="button-panel">
    <div class="terminal">
       <div class="terminal">
  <div class="teletype-terminal">
    <div class="paper" id="terminal-paper"></div>
    <div class="input-line" id="input-line">> <span class="cursor">&nbsp;</span></div>
  </div>
</div>




<script>
    const paper = document.getElementById("terminal-paper");
    const inputLine = document.getElementById("input-line");
    let commandBuffer = "";

    function updateInput() {
      inputLine.innerHTML = `> ${commandBuffer}<span class="cursor">&nbsp;</span>`;
    }

    function printLine(text, delay = 0) {
      let i = 0;
      const line = document.createElement("div");
      paper.appendChild(line);

      function typeChar() {
        if (i < text.length) {
          line.textContent += text[i++];
          setTimeout(typeChar, delay);
        } else {
          paper.scrollTop = paper.scrollHeight;
        }
      }

      if (delay > 0) {
        typeChar();
      } else {
        line.textContent = text;
        paper.scrollTop = paper.scrollHeight;
      }
    }

    function processCommand(cmd) {
  switch (cmd) {
    case "help":
      printLine("Доступные команды:");
      printLine("- help — показать команды");
      printLine("- bio — кто ты, воин?");
      printLine("- scp-8888-a — ?");
      printLine("- projects — список проектов");
      printLine("- clear — очистить экран");
      printLine("- scp8888 — данные засекречены");
      printLine("- sudo — получить права доступа");
      printLine("- coffee — ☕");
      printLine("- version — показать версию SCP-OS");
      printLine("- books — Скачать документ");
      printLine("- fortune — получить случайную истину");
      printLine("- matrix - Запускает эффект матрицы");
      printLine("- redalert - Активирует режим тревоги с глитч-эффектом");
      printLine("- hackerman - Включает хакерский интерфейс");
      printLine("- decode - Декодирует секретное сообщение");
      printLine("- rick - Сюрприз для настоящих исследователей");
      printLine("- asciiart - Показывает ASCII-арт SCP");
      printLine("- snake - Запускает snake.exe");
      printLine("- doom - Запускает doom.exe");
      break;

    case "bio":
      printLine("FixitFun — инди-разработчик, SCP-8888, спец по стилю, кодингу и атмосфере.");
      break;

      case "scp-8888-a":
      printLine("Мы пока не знаем его аномальных свойств.");
      break;

    case "projects":
      printLine("Crazy-Ride - [ДАННЫЕ УДАЛЕНЫ]");
      break;

    case "clear":
      paper.innerHTML = "";
      break;

    case "scp8888":
      printLine("[ACCESS DENIED] Уровень допуска недостаточен.");
      break;

    case "sudo":
      printLine("⛔ Доступ запрещён. Тебе что, root приснился?");
      break;

    case "coffee":
      printLine("Завариваю виртуальный кофе... ☕ Готово! Наслаждайся, бро.");
      break;

    case "version":
      printLine("SCP-OS v3.14.15 — Build 8000.1 (Top Secret)");
      break;

      case "books":
      printLine("Скачать документ");
      break;

    case "fortune":
      const fortunes = [
        "Если код работает — не трогай его.",
        "Тот, кто дебажит в 3 ночи, обречён.",
        "git push --force — последние слова известного разработчика.",
        "Каждый баг — это просто фича в плохом костюме.",
        "Перекомпилируй — и всё наладится... или нет."
      ];
      const msg = fortunes[Math.floor(Math.random() * fortunes.length)];
      printLine("! " + msg);
      break;

      case "matrix":
        printLine("Инициализация матричного протокола...");
        launchMatrix();
        break;
        
      case "redalert":
        const alertLine = document.createElement('div');
        alertLine.innerHTML = '<span class="blink glitch">ТРЕВОГА! СИСТЕМА ВЗЛОМАНА</span>';
        paper.appendChild(alertLine);
        playAlert();
        break;
        
      case "hackerman":
        printLine("Активация 1337-режима...");
        document.body.style.backgroundColor = '#000';
        document.body.style.color = '#0f0';
        break;
        
      case "decode":
        printLine("Декодирование SCP-8888...", 100);
        setTimeout(() => {
          const encoded = "U0NQIC0gU2VjdXJlLCBDb250YWluLCBQcm90ZWN0";
          printLine(atob(encoded));
        }, 2000);
        break;
        
      case "rick":
        const video = document.createElement('iframe');
        video.width = 0;
        video.height = 0;
        video.src = 'https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1';
        document.body.appendChild(video);
        break;
        
      case "asciiart":
        printLine("░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░");
        printLine("░░███░█░█░████░█░░█░████░█░░█░");
        printLine("░░█░░░█░█░█░░░░█░░█░█░░░░█░█░░");
        printLine("░░███░████░███░████░███░░██░░░");
        printLine("░░█░░░█░░█░░░░█░█░░█░█░░░░█░█░░");
        printLine("░░█░░░█░░█░████░█░░█░████░█░░█░");
        printLine("░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░");
        break;

    case "snake.exe":
    case "snake":
      printLine("Запуск игры Змейка...");
      launchSnakeGame();
      break;

    case "doom.exe":
    case "doom":
      printLine("Запуск игры DOOM...");
      const game = new SCPDoom3D();
      document.body.appendChild(game.container);
      game.enableControls();
      printLine("АКТИВАЦИЯ ПРОТОКОЛА SCP-8802...");
      printLine("ОБНАРУЖЕНЫ SCP-939: 5 ЕДИНИЦ");
      break;

    default:
      printLine("Неизвестная команда. Введите 'help'.");
  }
}

    document.addEventListener("keydown", (e) => {
      if (e.key.length === 1 && !e.ctrlKey && !e.metaKey) {
        commandBuffer += e.key;
        updateInput();
      } else if (e.key === "Backspace") {
        commandBuffer = commandBuffer.slice(0, -1);
        updateInput();
      } else if (e.key === "Enter") {
        printLine("> " + commandBuffer);
        processCommand(commandBuffer.trim().toLowerCase());
        commandBuffer = "";
        updateInput();
      }
    });

    // Первичный фокус — чтобы сразу можно было вводить
    window.onload = () => {
      window.focus();
      printLine("Добро пожаловать в SCP-ФОНД терминал. Введите 'help'.");
    };

     // Добавляем новые функции
  function launchMatrix() {
    const overlay = document.createElement('div');
    overlay.className = 'matrix-overlay';
    document.body.appendChild(overlay);

    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*';
    const columns = Math.floor(window.innerWidth / 20);
    
    function rain() {
      const ch = chars[Math.floor(Math.random() * chars.length)];
      const x = Math.floor(Math.random() * window.innerWidth);
      const element = document.createElement('div');
      
      element.style.position = 'absolute';
      element.style.left = x + 'px';
      element.style.color = '#0f0';
      element.textContent = ch;
      
      overlay.appendChild(element);
      
      let y = 0;
      const fall = () => {
        y += 2;
        element.style.top = y + 'px';
        if(y < window.innerHeight) {
          requestAnimationFrame(fall);
        } else {
          element.remove();
        }
      };
      requestAnimationFrame(fall);
    }
    
    const matrixInterval = setInterval(rain, 50);
    setTimeout(() => {
      clearInterval(matrixInterval);
      overlay.remove();
    }, 5000);
  }

  function playAlert() {
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const oscillator = audioCtx.createOscillator();
    const gainNode = audioCtx.createGain();

    oscillator.connect(gainNode);
    gainNode.connect(audioCtx.destination);

    oscillator.type = 'square';
    oscillator.frequency.setValueAtTime(440, audioCtx.currentTime);
    gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);

    oscillator.start();
    setTimeout(() => oscillator.stop(), 200);
  }

function launchSnakeGame() {
  // Создаём модальное окно
  const modal = document.createElement('div');
  modal.className = 'modal';
  modal.innerHTML = `
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h2>🐍 Игра Змейка</h2>
      <canvas id="snake-canvas" width="400" height="400"></canvas>
      <p>Управление: Стрелки или WASD. Ешь еду, не врежься в стены или в себя!</p>
    </div>
  `;
  document.body.appendChild(modal);

  // Стили модалки
  const style = document.createElement('style');
  style.textContent = `
    .modal {
      display: flex;
      position: fixed;
      z-index: 9999;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #222; color: #0f0; padding: 20px;
      border-radius: 10px; text-align: center;
      max-width: 500px; width: 100%;
    }
    .close-btn {
      position: absolute; top: 10px; right: 20px;
      cursor: pointer; font-size: 24px; color: red;
    }
    canvas {
      background: black; display: block; margin: 0 auto;
    }
  `;
  document.head.appendChild(style);

  // Закрытие модалки
  modal.querySelector('.close-btn').onclick = () => modal.remove();

  // Запуск змейки
  startSnake(document.getElementById('snake-canvas'));
}




function startSnake(canvas) {
  const ctx = canvas.getContext('2d');
  const gridSize = 20;
  const tileCount = canvas.width / gridSize;
  let snake = [{x: 10, y: 10}];
  let apple = {x: 15, y: 15};
  let dx = 0, dy = 0;
  let gameLoop;

  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowUp': case 'w': dy = -1; dx = 0; break;
      case 'ArrowDown': case 's': dy = 1; dx = 0; break;
      case 'ArrowLeft': case 'a': dx = -1; dy = 0; break;
      case 'ArrowRight': case 'd': dx = 1; dy = 0; break;
    }
  });

  function game() {
    const head = {x: snake[0].x + dx, y: snake[0].y + dy};
    if (head.x < 0 || head.y < 0 || head.x >= tileCount || head.y >= tileCount || snake.slice(1).some(s => s.x === head.x && s.y === head.y)) {
      clearInterval(gameLoop);
      alert('Игра окончена!');
      return;
    }

    snake.unshift(head);

    if (head.x === apple.x && head.y === apple.y) {
      // Новое яблоко появляется в случайной позиции
      do {
        apple = {
          x: Math.floor(Math.random() * tileCount),
          y: Math.floor(Math.random() * tileCount)
        };
      } while (snake.some(s => s.x === apple.x && s.y === apple.y));
    } else {
      snake.pop();
    }

    // Отрисовка
    ctx.fillStyle = 'black';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = 'lime';
    snake.forEach(s => ctx.fillRect(s.x * gridSize, s.y * gridSize, gridSize - 2, gridSize - 2));

    ctx.fillStyle = 'red';
    ctx.fillRect(apple.x * gridSize, apple.y * gridSize, gridSize - 2, gridSize - 2);
  }

  gameLoop = setInterval(game, 100);
}


class SCPDoom3D {
  constructor() {
    this.container = document.createElement('div');
    this.container.id = 'scp3d-container';
    this.enemies = [];
    this.bullets = [];
    
    this.weapons = {
      pistol: {
        damage: 30,
        fireRate: 500,
        ammo: 50,
        color: 0x00ff00,
        sound: 'https://www.101soundboards.com/sounds/697323-aa-12-single',
        model: null
      },
      shotgun: {
        damage: 100,
        fireRate: 1000,
        ammo: 20,
        color: 0xff4500,
        spread: 0.2,
        sound: 'https://freesound.org/data/previews/511/511664_10702966-lq.mp3',
        model: null
      }
    };

    this.currentWeapon = 'pistol';
    this.playerHealth = 100;
    this.ammoPickups = [];
    this.healthKits = [];

    this.initDOM();
    this.initScene();
    this.initSound();
    this.generatePickups();
    this.initWeaponModels();
  }

  initDOM() {
    this.container.innerHTML = `
      <div class="scp3d-hud">
        <div>ЗДОРОВЬЕ: ${this.playerHealth}%</div>
        <div>ПАТРОНЫ: ${this.weapons[this.currentWeapon].ammo}</div>
        <div>ОРУЖИЕ: ${this.currentWeapon.toUpperCase()}</div>
        <div style="color:#f00">SCP-939 Осталось: <span id="enemy-count">0</span></div>
        <div>[1] Пистолет | [2] Дробовик | [SPACE] Огонь | [ESC] Выход</div>
      </div>
    `;
    this.enemyCounter = this.container.querySelector('#enemy-count');
  }

  initScene() {
    this.scene = new THREE.Scene();
    this.camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    this.renderer = new THREE.WebGLRenderer({ antialias: true });
    this.renderer.setSize(window.innerWidth, window.innerHeight);
    this.container.prepend(this.renderer.domElement);

    const textureLoader = new THREE.TextureLoader();
    this.wallTexture = textureLoader.load('https://i.imgur.com/8QZQZwW.png');
    this.floorTexture = textureLoader.load('https://i.imgur.com/7Vn5rNq.png');

    const light = new THREE.DirectionalLight(0xffffff, 0.8);
    light.position.set(0, 10, 0);
    this.scene.add(light);

    this.generateSCPLevel();
    this.spawnEnemies(5);

    this.camera.position.set(5, 1.6, 5);
    this.controls = new THREE.PointerLockControls(this.camera, this.renderer.domElement);

    this.animate();
  }

  initWeaponModels() {
    const loader = new THREE.GLTFLoader();

  // Загрузка модели пистолета
  loader.load('https://p.turbosquid.com/ts-thumb/BC/rdIqg5/aO/capture7/png/1663968565/1920x1080/fit_q87/5b9382c7462650c2731dece3950b0fb9be5f0c69/capture7.jpg', (gltf) => {
    this.weapons.pistol.model = gltf.scene;
    
    // Настройка позиции и масштаба
    this.weapons.pistol.model.scale.set(0.1, 0.1, 0.1);
    this.weapons.pistol.model.position.set(0.5, -0.5, -1);
    this.weapons.pistol.model.rotation.set(0, Math.PI, 0);
    
    this.scene.add(this.weapons.pistol.model);
    this.weapons.pistol.model.visible = false;
  }, undefined, (error) => {
    console.error('Error loading pistol model:', error);
  });

  // Загрузка модели дробовика
  loader.load('https://cdn.yoursite.com/models/shotgun.glb', (gltf) => {
    this.weapons.shotgun.model = gltf.scene;
    
    // Настройка позиции и масштаба
    this.weapons.shotgun.model.scale.set(0.08, 0.08, 0.08);
    this.weapons.shotgun.model.position.set(0.7, -0.6, -1.2);
    this.weapons.shotgun.model.rotation.set(0, Math.PI, 0);
    
    this.scene.add(this.weapons.shotgun.model);
    this.weapons.shotgun.model.visible = false;
  }, undefined, (error) => {
    console.error('Error loading shotgun model:', error);
  });

  this.updateWeaponDisplay();
}

  updateWeaponDisplay() {
    Object.values(this.weapons).forEach(weapon => {
      if(weapon.model) weapon.model.visible = false;
    });
    if(this.weapons[this.currentWeapon].model) {
      this.weapons[this.currentWeapon].model.visible = true;
    }
  }

  initSound() {
    this.sounds = {
      pistol: new Howl({ src: [this.weapons.pistol.sound], volume: 0.7 }),
      shotgun: new Howl({ src: [this.weapons.shotgun.sound], volume: 0.9 }),
      pickup: new Howl({ src: 'https://freesound.org/data/previews/427/427558_8414420-lq.mp3' }),
      enemyDeath: new Howl({ src: 'https://freesound.org/data/previews/600/600512_11861866-lq.mp3' })
    };
  }

  generatePickups() {
    const pickupGeometry = new THREE.SphereGeometry(0.3);
    
    // Патроны
    const ammoMaterial = new THREE.MeshPhongMaterial({ 
      color: 0xFFFF00,
      emissive: 0x444400
    });
    
    for(let i = 0; i < 10; i++) {
      const ammo = new THREE.Mesh(pickupGeometry, ammoMaterial);
      ammo.position.set(Math.random() * 40 - 20, 0.5, Math.random() * 40 - 20);
      this.scene.add(ammo);
      this.ammoPickups.push(ammo);
    }

    // Аптечки
    const healthMaterial = new THREE.MeshPhongMaterial({
      color: 0xFF0000,
      emissive: 0x400000
    });
    
    for(let i = 0; i < 5; i++) {
      const health = new THREE.Mesh(pickupGeometry, healthMaterial);
      health.position.set(Math.random() * 40 - 20, 0.5, Math.random() * 40 - 20);
      this.scene.add(health);
      this.healthKits.push(health);
    }
  }

  generateSCPLevel() {
    const wallGeometry = new THREE.BoxGeometry(1, 3, 1);
    const wallMaterial = new THREE.MeshPhongMaterial({ 
      map: this.wallTexture,
      bumpScale: 0.05
    });

    for(let x = -10; x <= 10; x += 2) {
      for(let z = -10; z <= 10; z += 2) {
        if (Math.random() > 0.7) {
          const wall = new THREE.Mesh(wallGeometry, wallMaterial);
          wall.position.set(x, 1.5, z);
          this.scene.add(wall);
        }
      }
    }

    const floor = new THREE.Mesh(
      new THREE.PlaneGeometry(100, 100),
      new THREE.MeshPhongMaterial({ 
        map: this.floorTexture,
        repeat: [20, 20]
      })
    );
    floor.rotation.x = -Math.PI / 2;
    this.scene.add(floor);
  }

  spawnEnemies(count) {
    const enemyGeometry = new THREE.SphereGeometry(0.5, 8, 8);
    const enemyMaterial = new THREE.MeshPhongMaterial({ 
      color: 0xff0000,
      emissive: 0x440000
    });

    for(let i = 0; i < count; i++) {
      const enemy = new THREE.Mesh(enemyGeometry, enemyMaterial);
      enemy.position.set(
        Math.random() * 20 - 10,
        0.5,
        Math.random() * 20 - 10
      );
      enemy.health = 100;
      this.scene.add(enemy);
      this.enemies.push(enemy);
    }
    this.updateEnemyCounter();
  }

  updateEnemyCounter() {
    this.enemyCounter.textContent = this.enemies.length;
  }

  animate() {
    requestAnimationFrame(() => this.animate());
    
    // Обновление позиции оружия
    if(this.weapons[this.currentWeapon].model) {
      this.weapons[this.currentWeapon].model.position.copy(this.camera.position);
      this.weapons[this.currentWeapon].model.rotation.copy(this.camera.rotation);
      this.weapons[this.currentWeapon].model.translateX(0.3);
      this.weapons[this.currentWeapon].model.translateY(-0.2);
      this.weapons[this.currentWeapon].model.translateZ(-0.5);
    }

    this.enemies.forEach((enemy, index) => {
      const direction = new THREE.Vector3()
        .subVectors(this.camera.position, enemy.position)
        .normalize();
      enemy.position.add(direction.multiplyScalar(0.01));

      if(enemy.position.distanceTo(this.camera.position) < 1.5) {
        this.playerHealth -= 0.5;
        this.updateHUD();
        if(this.playerHealth <= 0) {
          this.destroy();
          printLine("ВЫ УНИЧТОЖЕНЫ. SCP-939 ПРЕВОСХОДЯТ ВАС.");
        }
      }
    });

    this.bullets.forEach((bullet, bulletIndex) => {
      bullet.position.add(bullet.velocity);
      
      this.enemies.forEach((enemy, enemyIndex) => {
        if(bullet.position.distanceTo(enemy.position) < 1) {
          enemy.health -= bullet.damage;
          
          if(enemy.health <= 0) {
            this.scene.remove(enemy);
            this.enemies.splice(enemyIndex, 1);
            this.sounds.enemyDeath.play();
            this.updateEnemyCounter();
          }
          
          this.scene.remove(bullet);
          this.bullets.splice(bulletIndex, 1);
        }
      });
    });

    this.renderer.render(this.scene, this.camera);
  }

  updateHUD() {
    this.container.querySelector('.scp3d-hud').innerHTML = `
      <div>ЗДОРОВЬЕ: ${Math.max(0, this.playerHealth)}%</div>
      <div>ПАТРОНЫ: ${this.weapons[this.currentWeapon].ammo}</div>
      <div>ОРУЖИЕ: ${this.currentWeapon.toUpperCase()}</div>
      <div style="color:#f00">SCP-939 Осталось: ${this.enemies.length}</div>
      <div>[1] Пистолет | [2] Дробовик | [SPACE] Огонь | [ESC] Выход</div>
    `;
  }

  enableControls() {
    this.controls.lock();
    document.addEventListener('keydown', this.handleKey.bind(this));
  }

  handleKey(e) {
    const moveSpeed = 0.2;
    const direction = new THREE.Vector3();

    switch(e.key) {
      case 'ArrowUp': direction.z -= moveSpeed; break;
      case 'ArrowDown': direction.z += moveSpeed; break;
      case 'ArrowLeft': direction.x -= moveSpeed; break;
      case 'ArrowRight': direction.x += moveSpeed; break;
      case ' ': this.fireWeapon(); break;
      case 'Escape': this.destroy(); break;
      case '1': 
        this.currentWeapon = 'pistol'; 
        this.updateWeaponDisplay();
        this.updateHUD();
        break;
      case '2': 
        this.currentWeapon = 'shotgun'; 
        this.updateWeaponDisplay();
        this.updateHUD();
        break;
    }

    this.camera.position.add(direction);
    this.checkPickups();
  }

  fireWeapon() {
    const weapon = this.weapons[this.currentWeapon];
    
    if(weapon.ammo <= 0) {
      printLine("Нет патронов! Ищи желтые сферы на карте!");
      return;
    }

    weapon.ammo--;
    this.sounds[this.currentWeapon].play();

    if(this.currentWeapon === 'shotgun') {
      for(let i = 0; i < 8; i++) this.createBullet(weapon.damage / 4, weapon.spread);
    } else {
      this.createBullet(weapon.damage);
    }

    this.updateHUD();
  }

  createBullet(damage, spread = 0) {
    const bullet = new THREE.Mesh(
      new THREE.SphereGeometry(0.1),
      new THREE.MeshBasicMaterial({ color: this.weapons[this.currentWeapon].color })
    );
    
    bullet.position.copy(this.camera.position);
    const direction = new THREE.Vector3(0, 0, -1)
      .applyQuaternion(this.camera.quaternion)
      .add(new THREE.Vector3(
        (Math.random() - 0.5) * spread,
        (Math.random() - 0.5) * spread,
        0
      ))
      .multiplyScalar(0.5);

    bullet.velocity = direction;
    bullet.damage = damage;
    this.scene.add(bullet);
    this.bullets.push(bullet);

    setTimeout(() => {
      this.scene.remove(bullet);
      this.bullets = this.bullets.filter(b => b !== bullet);
    }, 2000);
  }

  checkPickups() {
    const playerPos = this.camera.position;
    
    this.ammoPickups.forEach((ammo, index) => {
      if(playerPos.distanceTo(ammo.position) < 1) {
        this.weapons[this.currentWeapon].ammo += 30;
        this.scene.remove(ammo);
        this.ammoPickups.splice(index, 1);
        this.sounds.pickup.play();
        this.updateHUD();
      }
    });

    this.healthKits.forEach((health, index) => {
      if(playerPos.distanceTo(health.position) < 1) {
        this.playerHealth = Math.min(100, this.playerHealth + 30);
        this.scene.remove(health);
        this.healthKits.splice(index, 1);
        this.sounds.pickup.play();
        this.updateHUD();
      }
    });
  }

  destroy() {
    this.renderer.dispose();
    this.container.remove();
    printLine("СОЕДИНЕНИЕ С SCP-8802 ПРЕРВАНО");
  }
}




  </script>


      <div class="psi-indicator">
        <div class="psi-bar" style="width: 72%"></div>
        <span class="psi-label">PSI: 72%</span>
    </div>
   
</div>
  
<script>
    // Анимация PSI-индикатора
    setInterval(() => {
        const psi = Math.floor(Math.random() * 20 + 60);
        document.querySelector('.psi-bar').style.width = `${psi}%`;
        document.querySelector('.psi-label').textContent = `PSI: ${psi}%`;
    }, 2000);
</script>

<audio id="select-sound" src="https://assets.mixkit.co/active_storage/sfx/2591/2591-preview.mp3"></audio>
    <audio id="confirm-sound" src="https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"></audio>
    <audio id="error-sound" src="https://assets.mixkit.co/active_storage/sfx/2588/2588-preview.mp3"></audio>
    
 <!-- Статусные элементы -->
    <div class="status-indicators">
        <div class="status-indicator" onclick="openModal()">
            <span class="led led-green"></span> TERMINAL ACCESS
        </div>
    </div>

    <!-- Модальное окно -->
    <div id="fnaf-modal" class="fnaf-modal">
        <div class="bg-warnings">
            <div class="warning-text rotate-15">[SECURITY LOCK]</div>
            <div class="warning-text rotate-345">[RESTRICTED]</div>
        </div>

        <div class="crt-overlay"></div>
        <div class="static-overlay"></div>

        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">⨯</span>
            
            <h1 class="glitch-title" style="padding: 30px; margin: 0; animation: glitch 2s infinite">
                SYSTEM NAVIGATION
            </h1>
            
            <div class="security-container">
                <div class="navigation-panel">
                    <div class="nav-item selected" data-url="./html/project.html"> <a href="#">PROJECTS</a></div>
                    <div class="nav-item" data-url="./html/donate.html"> <a href="#">DONATE</a></div>
                    <div class="nav-item" data-url="./html/updates.html"> <a href="#">UPDATES</a></div>
                    <div class="nav-item" data-url="./html/registry.html"> <a href="#">REGISTRY</a></div>
                </div>
                
                <div class="confirmation-panel">
                    <button class="confirm-btn" onclick="navigateToSelected()">
                        EXECUTE SELECTION [ENTER]
                    </button>
                </div>
            </div>
        </div>
    </div>

<script>
    let currentSelection = 0;
    const navItems = document.querySelectorAll('.nav-item');
    const modal = document.getElementById('fnaf-modal');
    
    // Звуковые эффекты
    const sounds = {
        select: new Audio('https://assets.mixkit.co/active_storage/sfx/2591/2591-preview.mp3'),
        confirm: new Audio('https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3'),
        error: new Audio('https://assets.mixkit.co/active_storage/sfx/2588/2588-preview.mp3')
    };

    function playSound(type) {
        sounds[type].currentTime = 0;
        sounds[type].play();
    }

    function openModal() {
        playSound('select');
        modal.classList.add('active');
        currentSelection = 0;
        updateSelection();
    }

    function closeModal() {
        playSound('error');
        modal.classList.remove('active');
        navItems.forEach(item => item.classList.remove('selected'));
        
        // Останавливаем все звуки
        Object.values(sounds).forEach(sound => {
            sound.pause();
            sound.currentTime = 0;
        });
    }

    function updateSelection() {
        navItems.forEach((item, index) => {
            item.classList.toggle('selected', index === currentSelection);
        });
    }

    function navigateToSelected() {
        playSound('confirm');
        const selected = navItems[currentSelection];
        setTimeout(() => {
            window.location.href = selected.dataset.url;
        }, 500);
    }

    document.addEventListener('keydown', (e) => {
        if (modal.classList.contains('active')) {
            switch(e.key) {
                case 'ArrowUp':
                    e.preventDefault();
                    playSound('select');
                    currentSelection = Math.max(0, currentSelection - 1);
                    updateSelection();
                    break;
                    
                case 'ArrowDown':
                    e.preventDefault();
                    playSound('select');
                    currentSelection = Math.min(navItems.length - 1, currentSelection + 1);
                    updateSelection();
                    break;
                    
                case 'Enter':
                    e.preventDefault();
                    navigateToSelected();
                    break;
                    
                case 'Escape':
                    e.preventDefault();
                    closeModal();
                    break;
            }
        }
    });

    window.onclick = function(e) {
        if(e.target === modal) {
            closeModal();
        }
    }



</script>

   


<!-- музыка-терминал -->

<div class="music-terminal">
  <div class="terminal-header">🎵 RETRO AUDIO TERMINAL</div>
  <div class="track-info" id="trackName">// initializing.wav</div>
  <div class="controls">
    <button id="playBtn">▶</button>
    <button id="stopBtn">❚❚</button>
    <button id="randomBtn">🎲</button>
  </div>
  <audio id="audioPlayer" preload="auto"></audio>
</div>

<script>
  const tracks = [
    { name: "// SOUL_CORE_FRAGMENT.ogg", url: "вайб.mp3" },
    { name: "// failed_hope_remix.mp3", url: "вайб2.mp3" },
  ];

  const audio = document.getElementById('audioPlayer');
  const trackName = document.getElementById('trackName');
  const playBtn = document.getElementById('playBtn');
  const stopBtn = document.getElementById('stopBtn');
  const randomBtn = document.getElementById('randomBtn');

  let currentTrack = null;

  function loadRandomTrack() {
    const track = tracks[Math.floor(Math.random() * tracks.length)];
    trackName.textContent = track.name;
    audio.src = `music/${track.url}`; // Убедись, что музыка лежит в папке "music"
    currentTrack = track;
  }

  playBtn.addEventListener('click', () => {
    if (!currentTrack) loadRandomTrack();
    audio.play();
  });

  stopBtn.addEventListener('click', () => {
    audio.pause();
    audio.currentTime = 0;
  });

  randomBtn.addEventListener('click', () => {
    loadRandomTrack();
    audio.play();
  });

  // Загрузи трек по умолчанию
  loadRandomTrack();
</script>

<!-- Большой глаз-наблюдатель -->
<div class="eye-observer-wrapper">
  <div class="eye-large">
    <div class="eye-large-ball"></div>
  </div>
  <p class="eye-large-quote">"Я наблюдаю..."</p>
</div>

<script>
const eye = document.querySelector('.eye-large');
const eyeBall = document.querySelector('.eye-large-ball');
const quote = document.querySelector('.eye-large-quote');

const phrases = [
  "Я видел, как ты двигал курсор...",
  "Курсор дрожит. Нервничаешь?",
  "Опять ты с уставшим лицом, да?",
  "Включи хоть музыку, послушаем вместе.",
  "Думай перед кликом.",
  "Я всё вижу."
];

// движение зрачка за курсором
window.addEventListener('mousemove', (e) => {
  const rect = eye.getBoundingClientRect();
  const x = e.clientX - rect.left - rect.width / 2;
  const y = e.clientY - rect.top - rect.height / 2;
  const max = 20;
  const clampedX = Math.max(-max, Math.min(max, x));
  const clampedY = Math.max(-max, Math.min(max, y));
  eyeBall.style.left = `${28 + clampedX * 0.4}px`;
  eyeBall.style.top = `${28 + clampedY * 0.4}px`;
});

// моргание и смена фраз
setInterval(() => {
  eyeBall.style.visibility = 'hidden';
  setTimeout(() => {
    eyeBall.style.visibility = 'visible';
    if (Math.random() < 0.7) {
      quote.textContent = phrases[Math.floor(Math.random() * phrases.length)];
    }
  }, 140);
}, 5000);
</script>


<div class="fnaf-control-panel">
    <button class="fnaf-3d-btn">
        <span class="btn-label">⏻</span>
        <div class="btn-glitch"></div>
        <div class="crt-overlay"></div>
    </button>
 <button class="fnaf-3d-btn open-sound-modal-btn">
    <span class="btn-label">🕪</span>
  </button>
   <button class="fnaf-3d-btn">
        <span class="btn-label">🇷🇺</span>
        <div class="btn-glitch"></div>
        <div class="crt-overlay"></div>
    </button>
</div>
<!-- Модальное окно -->
<div class="fnaf_modal crt-effect" id="soundModal" style="display: none;">
    <div class="crt_glitch"></div>
    <div class="modal_overlay">
        <div class="modal_content">
            <div class="scanline"></div>
            <div class="noise"></div>
            <h2 id="toggleHeaderSound" class="glitch-text">AUDIO CONTROL</h2>
            <div class="status-display">
                <span class="system-font">STATUS:</span>
                <span id="soundStatus" class="blink">ACTIVE</span>
            </div>
            <div class="button-container">
                <button class="system_btn danger" id="toggleSoundBtn">
                    <span class="btn_label">🔇 DISABLE SOUND</span>
                    <div class="btn_static"></div>
                </button>
                <button class="system_btn" id="closeModalBtn" style="cursor: pointer;">
                    <span class="btn_label" style="cursor: pointer;">EXIT</span>
                    <div class="btn_static"></div>
                </button>
            </div>
            <div class="warning-message blink">
                ⚠ WARNING: Пока что не работает, ESC чтобы выйти
            </div>
        </div>
    </div>
</div>



<!-- картинка -->
  <div class="container_image">
<div class="img-sidebar">
  <img src="./icon/бум.png" alt="фотка silampix" style="width: 300px; height: 300px; margin-top: 20px; margin-bottom: 10px; margin-left: 70px;">
</div>

<div>
    <p>FIXITFUN SYSTEM v0.8.7 - STATUS: OPERATIONAL</p>
    <p>MONITOR: CRT-9X | INTERFACE: RETRO-UX | USER: LEVEL 4</p>
    <p>© 2025 Foundation Systems. ALL RIGHTS OBSERVED.</p>
  </div>
</div>
</div>
</div>
</aside>




<main>
  <div class="content">
        <div class="logo-text">
                <img src="./icon/Scp(1).svg" alt="SCP" width="100" height="100">
    </div>
    <div class="scp-box">
      <h2>Объект №: SCP-8888</h2>
      <strong>Класс объекта:</strong> Safe<img src="/icon/Safe.webp" alt="safe" class="safe"><br>
      <strong>Уровень допуска:</strong> 3/8000<br>
      <strong>Версия документа:</strong> 1.8.7 (Final Candidate)<br>
      <strong>Последнее обновление:</strong> ██.██.2025
    </div>

    <div class="scp-box">
      <h3>Особые условия содержания</h3>
      <p>SCP-8888 должен содержаться в индивидуальной жилой ячейке, соответствующей протоколу разработки категории INDEV. Камера оснащается:</p>
      <ul>
        <li>Автономной системой генерации креативных решений</li>
        <li>Подключением к IDE-контейнеру (JetBrains Rider, Visual Studio Code)</li>
        <li>Регулярной подачей ингредиентов высокого вдохновения</li>
        <li>Доступом к обучающим видео по Unity, Blender, Lua, FL Studio, DaVinci</li>
        <li>Ежедневная подача высококлассного мёда</li>
      </ul>
      <p><strong>ВНИМАНИЕ:</strong> Любая перегрузка задачами без пищи и отдыха может вызвать аффективно-креативный срыв.</p>
    </div>

    <div class="scp-box">
      <h3>Описание</h3>
      <p>SCP-8888 (псевдоним: «СДВГ», внутренний ID: <em>FixitFun</em>) — Инди-разработчик, занимается инди-разработкой в течении █████. Является мужчиной европеоидной расы.
      Согласно архивным записям, SCP-8888 родился в ████ году, и на момент постановки на содержание его возраст составлял ██ лет. Волосы субъекта спереди (светлые), остальная часть волос чёрная. Глаза голубые, рост и вес на момент написания данного документа составляли 178 сантиметра и 80кг килограмм соответственно. Никаких нестандартных физических характеристик у субъекта не выявлено; похоже, что во всех отношениях субъект является нормальным человеком в хорошем состоянии здоровья.
      <br>
      SCP-8888-A - ноутбук TRS-80 Model 100, произведённый в 1983 году. У SCP-8888-A не выявлено каких-либо аномальных физических свойств; предмет, по сути, является нормальным ноутбуком, который штатно функционирует в руках любого пользователя, за исключением SCP-8888.
      В руках SCP-8888, SCP-8888-A, перестаёт быть старым ноутбуком и становится площадкой для аномальных. При этом SCP-8888 способен запускать и увеличивать характеристики ноутбука для своих нужд, без внутреннего апгрейда SCP-8888-A. По свидетельствам пользователей, запуская игры от этого пользователя, у них появляется аномальный интерес к играм этого разработчика. В руках других людей как SCP-8888-A, так и взаимодействием сделанные с ним, не имеют каких-либо аномальных свойств.
      SCP-8888 продемонстрировал ограниченную способность воздействовать на пользователей, но наилучший результат достигается именно с использованием SCP-8888-A. На сегодняшний день только работа с данным устройством позволила SCP-8888 достичь заметных успехов в развитии его способности.
      </p>
      <p>Из увлечений вне кодинга у объекта:</p>
      <ul>
        <li>Прослушивание музыки 24/7</li>
        <li>Прогулки после тяжёлого дня</li>
        <li>Чтение различных книг (посмотреть список прочитанных книг вы можете введя команду в термина "books", там будет документ с ссылками)</li>
        <li>Физические упражнения (особенно Турники)</li>
      </ul>
    </div>

    <div class="scp-box">
      <h3>Протокол «Пиршество»</h3>
      <p>В случае понижения продуктивности разрешено использовать:</p>
      <ul>
        <li>Шоковую дозу вдохновения (саундтреки + артбуки)</li>
        <li>Гастроусилитель Ω-9 (энергетик + любимый трек)</li>
        <li>Сессию “GDC Talk + Dark Souls + геймдев-мемы”</li>
      </ul>
    </div>

    <div class="scp-box">
      <h3>Приложение A: Психологический профиль</h3>
      <p>Объект стремится к дисциплине, но часто работает в режиме хаоса. Предпочтения: киберпанк, пиксельарт, SCP и Backrooms атмосфера </p>
    </div>

    <div class="scp-box">
      <h3>Приложение B: Выдержка из протокола интервью 125-02-7526 от ██.██.████</h3>
      <p>    
      
      <Начало протокола>
<br>
<br>
    Д-р █████: Пожалуйста, представься и дай краткую информацию о себе, в том числе дату и место рождения.
        <br>
        <br>
    SCP-8888: Ладно… Меня зовут ██████████ █████, я родился в ██████████, край ██████████, 9 июня ████.
<br>
<br>
    Д-р █████: Хорошо. Первый вопрос: когда ты впервые заметил свою способность?
<br>
<br>
    SCP-8888: Точно не знаю, по-моему, лет в шестнадцать. Помню, что смотрел на старый ноутбук и вдруг заметил, что появляется иконка игры о которой я думал.
<br>
<br>
    Д-р █████: И что сделали родители, когда ты им об этом сказал?
<br>
<br>
    SCP-8888: Просто ответили, что у меня слишком живое воображение.
<br>
<br>
    Д-р █████: Когда ты обнаружил, что можешь создавать такие игры которые аномально влияют на пользователей?
<br>
<br>
    SCP-8888: Когда мне было шестнадцать лет. придя домой я создал игру ██████████ и скинул его другу ██████████. После этого он проявил аномальный интерес, хотя играми никогда не интересовался
<br>
<br>
    Д-р █████: Продолжай.
<br>
<br>
    SCP-8888: С того случая я зафанател от игр на этом ноутбуке. Сначала это не всегда срабатывало с пользователями, но когда я обрёл навыки сторонних программ... <SCP-8888 улыбается> Когда у меня появились новые навыки, мне стало… легче взаимодействовать с ноутбуком.
<br>
<br>
    Д-р █████: Это тот ноутбук, который мы обозначаем как SCP-8888-А? Твой личный?
<br>
<br>
    SCP-8888: Да, сэр.
<br>
<br>
    Д-р █████: На скольких играх ты можешь сосредоточиться одновременно?
<br>
<br>
    SCP-8888: С моим ноутбуком пробовал пробовал по несколько штук, но наверняка не получится больше.
<br>
<br>
    Д-р █████: Ты уже довольно долго пробыл в Фонде. Как твое впечатление?
<br>
<br>
    < SCP-8888 не отвечает. >
    <br>
    <br>
    Д-р █████: Ответь, пожалуйста. Мы не обижаемся на такие вещи.
<br>
<br>
    SCP-8888: Ну, это вроде как… Новая тюрьма, новые надзиратели. Но здесь ко мне относятся гуманно, да и разрешают взаимодействовать с интернетом.
<br>
<br>
    Д-р █████: Ты в последнее время был настроенной на сотрудничество.
<br>
<br>
    SCP-8888: Я вообще довольно порядочный человек. Еще мне нравится экспериментировать. О некоторых штуках с играми я раньше даже не догадывался.
<br>
<br>
    Д-р █████: Знаешь, почему я тебя обо всём этом спрашиваю, █████?
<br>
<br>
    SCP-8888: Нет, сэр.
<br>
<br>
    Д-р █████: Мы организуем особенную программу. Если дело выгорит, тебе можно будет покинуть Зону и свободно передвигаться по миру. Взамен мы попросим от тебя несколько услуг. Интересно?

    <Конец протокола></p>
    </div>

    <div class="quote">
      "Если SCP-8888 просит мёда — дайте. Иначе он выкатит новую игру и нам придётся её тестировать." — Др. ██████
    </div>
</div>
</main>
    </div>
      </div>


<script>
let isPowerOff = false;
let soundEnabled = true;

document.addEventListener('DOMContentLoaded', () => {
    const soundModal = document.getElementById('soundModal');
    const toggleSoundBtn = document.getElementById('toggleSoundBtn');
    const soundStatus = document.getElementById('soundStatus');
    const headerToggle = document.getElementById('toggleHeaderSound');
    const closeModalBtn = document.getElementById('closeModalBtn');

    // Вставка CSS-анимации
    const style = document.createElement('style');
    style.textContent = `
      @keyframes vibrate {
          0%, 100% { transform: translate(0); }
          20% { transform: translate(-2px, 2px); }
          40% { transform: translate(2px, -2px); }
          60% { transform: translate(-2px, -2px); }
          80% { transform: translate(2px, 2px); }
      }
      .fnaf-control-panel * {
          transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      }
    `;
    document.head.appendChild(style);

    // Тоггл звука
    function toggleSound(e) {
        if (e) e.stopPropagation();
        soundEnabled = !soundEnabled;

        if (soundStatus) {
            soundStatus.textContent = soundEnabled ? 'ACTIVE' : 'DISABLED';
            soundStatus.style.color = soundEnabled ? '#00ff66' : '#ff0044';
        }

        if (toggleSoundBtn) {
            const label = toggleSoundBtn.querySelector('.btn_label');
            if (label) {
                label.textContent = soundEnabled ? '🔇 DISABLE SOUND' : '🔊 ENABLE SOUND';
            } else {
                toggleSoundBtn.textContent = soundEnabled ? '🔇 DISABLE SOUND' : '🔊 ENABLE SOUND';
            }
        }

        document.querySelectorAll('audio, video').forEach(el => el.muted = !soundEnabled);
    }

    // Привязка событий
    headerToggle?.addEventListener('click', toggleSound);
    toggleSoundBtn?.addEventListener('click', toggleSound);

    document.querySelectorAll("button").forEach(button => {
        button.addEventListener("click", () => {
            const clickSound = document.getElementById("click-sound");
            if (clickSound && soundEnabled) {
                clickSound.currentTime = 0;
                clickSound.play();
            }
        });
    });

    // Открытие/закрытие модалки
    document.querySelector('.open-sound-modal-btn')?.addEventListener('click', (e) => {
        e.stopPropagation();
        soundModal.style.display = 'block';
    });

    closeModalBtn?.addEventListener('click', () => {
        soundModal.style.display = 'none';
    });

    soundModal?.addEventListener('click', (e) => {
        if (e.target.id === 'soundModal') {
            soundModal.style.display = 'none';
        }
    });

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && soundModal.style.display === 'block') {
            soundModal.style.display = 'none';
        }
    });

    // BIOS-загрузка
    window.addEventListener("load", () => {
        const biosSound = document.getElementById("bios-sound");
        biosSound?.play();

        const bios = document.getElementById("bios-screen");
        const site = document.querySelector(".container");
        site.style.display = "none";

        setTimeout(() => {
            bios.style.display = "none";
            site.style.display = "block";
        }, 7000);
    });

    // POWER OFF
    document.querySelectorAll('.fnaf-3d-btn')[0]?.addEventListener('click', powerOff);
});

function powerOff(event) {
    if (isPowerOff) return;
    isPowerOff = true;

    const btn = event.currentTarget;
    const body = document.body;

    btn.style.animation = 'vibrate 0.3s linear';
    setTimeout(() => btn.style.animation = '', 300);

    const playSound = () => {
        if (!soundEnabled) return;
        try {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            osc.type = 'square';
            osc.frequency.setValueAtTime(100, audioContext.currentTime);
            gain.gain.setValueAtTime(0.1, audioContext.currentTime);
            osc.connect(gain);
            gain.connect(audioContext.destination);
            osc.start();
            osc.stop(audioContext.currentTime + 0.8);
        } catch (e) {
            console.error('Audio error:', e);
        }
    };

    const overlay = document.createElement('div');
    overlay.style.cssText = `
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: #000; opacity: 0; z-index: 9999; pointer-events: none;
        transition: opacity 3s ease-out;
    `;
    body.appendChild(overlay);

    setTimeout(() => {
        playSound();
        overlay.style.opacity = '0.8';

        let flickerCount = 0;
        const flicker = () => {
            overlay.style.opacity = flickerCount % 2 === 0 ? '0.9' : '0.6';
            flickerCount++;
            if (flickerCount < 8) requestAnimationFrame(flicker);
        };
        flicker();

        setTimeout(() => {
            overlay.style.opacity = '1';
            setTimeout(() => {
                document.body.innerHTML = `
                    <div style="position: fixed; top: 50%; left: 50%;
                        transform: translate(-50%, -50%);
                        color: #0f0; font-family: 'Courier New', monospace;
                        text-align: center; text-shadow: 0 0 10px #0f0;">
                        SYSTEM POWER OFF<br>[Перезапустите систему]
                    </div>`;
                try {
                    window.open('', '_self').close();
                } catch (e) {
                    console.log('Browser prevented tab closing');
                }
            }, 2000);
        }, 1500);
    }, 50);
}
</script>






</body>
</html>